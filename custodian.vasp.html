<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>custodian.vasp package &#8212; custodian 1.0.3 documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="custodian 1.0.3 documentation" href="index.html" />

   
  
  <link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css" type= "text/css" rel="stylesheet" />
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39574369-1']);
  _gaq.push(['_trackPageview']);
</script>

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">custodian 1.0.3 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="custodian-vasp-package">
<h1>custodian.vasp package<a class="headerlink" href="#custodian-vasp-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="custodian.vasp.tests.html">custodian.vasp.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custodian.vasp.tests.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="custodian.vasp.tests.html#module-custodian.vasp.tests.test_handlers">custodian.vasp.tests.test_handlers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="custodian.vasp.tests.html#module-custodian.vasp.tests.test_jobs">custodian.vasp.tests.test_jobs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="custodian.vasp.tests.html#module-custodian.vasp.tests.test_validators">custodian.vasp.tests.test_validators module</a></li>
<li class="toctree-l2"><a class="reference internal" href="custodian.vasp.tests.html#module-custodian.vasp.tests">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-custodian.vasp.handlers">
<span id="custodian-vasp-handlers-module"></span><h2>custodian.vasp.handlers module<a class="headerlink" href="#module-custodian.vasp.handlers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="custodian.vasp.handlers.AliasingErrorHandler">
<em class="property">class </em><code class="descname">AliasingErrorHandler</code><span class="sig-paren">(</span><em>output_filename='vasp.out'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#AliasingErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.AliasingErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>Master VaspErrorHandler class that handles a number of common errors
that occur during VASP runs.</p>
<p>Initializes the handler with the output file to check.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>output_filename</strong> (<em>str</em>) &#8211; This is the file where the stdout for vasp
is being redirected. The error messages that are checked are
present in the stdout. Defaults to &#8220;vasp.out&#8221;, which is the
default redirect used by <a class="reference internal" href="#custodian.vasp.jobs.VaspJob" title="custodian.vasp.jobs.VaspJob"><code class="xref py py-class docutils literal"><span class="pre">custodian.vasp.jobs.VaspJob</span></code></a>.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.handlers.AliasingErrorHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#AliasingErrorHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.AliasingErrorHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.AliasingErrorHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#AliasingErrorHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.AliasingErrorHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.AliasingErrorHandler.error_msgs">
<code class="descname">error_msgs</code><em class="property"> = {'aliasing': ['WARNING: small aliasing (wrap around) errors must be expected'], 'aliasing_incar': ['Your FFT grids (NGX,NGY,NGZ) are not sufficient for an accurate']}</em><a class="headerlink" href="#custodian.vasp.handlers.AliasingErrorHandler.error_msgs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.AliasingErrorHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = True</em><a class="headerlink" href="#custodian.vasp.handlers.AliasingErrorHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="custodian.vasp.handlers.CheckpointHandler">
<em class="property">class </em><code class="descname">CheckpointHandler</code><span class="sig-paren">(</span><em>interval=3600</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#CheckpointHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.CheckpointHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>This is not an error handler per se, but rather a checkpointer. What this
does is that every X seconds, a STOPCAR and CHKPT will be written. This
forces VASP to stop at the end of the next ionic step. The files are then
copied into a subdir, and then the job is restarted. To use this proper,
max_errors in Custodian must be set to a very high value, and you
probably wouldn&#8217;t want to use any standard VASP error handlers. The
checkpoint will be stored in subdirs chk_#. This should be used in
combiantion with the StoppedRunHandler.</p>
<p>Initializes the handler with an interval.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>interval</strong> (<em>int</em>) &#8211; Interval at which to checkpoint in seconds.</li>
<li><strong>to 3600</strong> (<em>Defaults</em>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.handlers.CheckpointHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#CheckpointHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.CheckpointHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.CheckpointHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#CheckpointHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.CheckpointHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.CheckpointHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = True</em><a class="headerlink" href="#custodian.vasp.handlers.CheckpointHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.CheckpointHandler.is_terminating">
<code class="descname">is_terminating</code><em class="property"> = False</em><a class="headerlink" href="#custodian.vasp.handlers.CheckpointHandler.is_terminating" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="custodian.vasp.handlers.FrozenJobErrorHandler">
<em class="property">class </em><code class="descname">FrozenJobErrorHandler</code><span class="sig-paren">(</span><em>output_filename='vasp.out'</em>, <em>timeout=21600</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#FrozenJobErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.FrozenJobErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>Detects an error when the output file has not been updated
in timeout seconds. Changes ALGO to Normal from Fast</p>
<p>Initializes the handler with the output file to check.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output_filename</strong> (<em>str</em>) &#8211; This is the file where the stdout for vasp
is being redirected. The error messages that are checked are
present in the stdout. Defaults to &#8220;vasp.out&#8221;, which is the
default redirect used by <a class="reference internal" href="#custodian.vasp.jobs.VaspJob" title="custodian.vasp.jobs.VaspJob"><code class="xref py py-class docutils literal"><span class="pre">custodian.vasp.jobs.VaspJob</span></code></a>.</li>
<li><strong>timeout</strong> (<em>int</em>) &#8211; The time in seconds between checks where if there
is no activity on the output file, the run is considered
frozen. Defaults to 3600 seconds, i.e., 1 hour.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.handlers.FrozenJobErrorHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#FrozenJobErrorHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.FrozenJobErrorHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.FrozenJobErrorHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#FrozenJobErrorHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.FrozenJobErrorHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.FrozenJobErrorHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = True</em><a class="headerlink" href="#custodian.vasp.handlers.FrozenJobErrorHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="custodian.vasp.handlers.MaxForceErrorHandler">
<em class="property">class </em><code class="descname">MaxForceErrorHandler</code><span class="sig-paren">(</span><em>output_filename='vasprun.xml'</em>, <em>max_force_threshold=0.25</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#MaxForceErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.MaxForceErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>Checks that the desired force convergence has been achieved. Otherwise
restarts the run with smaller EDIFF. (This is necessary since energy
and force convergence criteria cannot be set simultaneously)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>input_filename</strong> (<em>str</em>) &#8211; name of the vasp INCAR file</li>
<li><strong>output_filename</strong> (<em>str</em>) &#8211; name to look for the vasprun</li>
<li><strong>max_force_threshold</strong> (<em>float</em>) &#8211; Threshold for max force for
restarting the run. (typically should be set to the value
that the creator looks for)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.handlers.MaxForceErrorHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#MaxForceErrorHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.MaxForceErrorHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.MaxForceErrorHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#MaxForceErrorHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.MaxForceErrorHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.MaxForceErrorHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = False</em><a class="headerlink" href="#custodian.vasp.handlers.MaxForceErrorHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="custodian.vasp.handlers.MeshSymmetryErrorHandler">
<em class="property">class </em><code class="descname">MeshSymmetryErrorHandler</code><span class="sig-paren">(</span><em>output_filename='vasp.out'</em>, <em>output_vasprun='vasprun.xml'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#MeshSymmetryErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.MeshSymmetryErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>Corrects the mesh symmetry error in VASP. This error is sometimes
non-fatal. So this error handler only checks at the end of the run,
and if the run has converged, no error is recorded.</p>
<p>Initializes the handler with the output files to check.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output_filename</strong> (<em>str</em>) &#8211; This is the file where the stdout for vasp
is being redirected. The error messages that are checked are
present in the stdout. Defaults to &#8220;vasp.out&#8221;, which is the
default redirect used by <a class="reference internal" href="#custodian.vasp.jobs.VaspJob" title="custodian.vasp.jobs.VaspJob"><code class="xref py py-class docutils literal"><span class="pre">custodian.vasp.jobs.VaspJob</span></code></a>.</li>
<li><strong>output_vasprun</strong> (<em>str</em>) &#8211; Filename for the vasprun.xml file. Change
this only if it is different from the default (unlikely).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.handlers.MeshSymmetryErrorHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#MeshSymmetryErrorHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.MeshSymmetryErrorHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.MeshSymmetryErrorHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#MeshSymmetryErrorHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.MeshSymmetryErrorHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.MeshSymmetryErrorHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = False</em><a class="headerlink" href="#custodian.vasp.handlers.MeshSymmetryErrorHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="custodian.vasp.handlers.NonConvergingErrorHandler">
<em class="property">class </em><code class="descname">NonConvergingErrorHandler</code><span class="sig-paren">(</span><em>output_filename='OSZICAR'</em>, <em>nionic_steps=10</em>, <em>change_algo=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#NonConvergingErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.NonConvergingErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>Check if a run is hitting the maximum number of electronic steps at the
last nionic_steps ionic steps (default=10). If so, change ALGO from Fast to
Normal or kill the job.</p>
<p>Initializes the handler with the output file to check.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output_filename</strong> (<em>str</em>) &#8211; This is the OSZICAR file. Change
this only if it is different from the default (unlikely).</li>
<li><strong>nionic_steps</strong> (<em>int</em>) &#8211; The threshold number of ionic steps that
needs to hit the maximum number of electronic steps for the
run to be considered non-converging.</li>
<li><strong>change_algo</strong> (<em>bool</em>) &#8211; Whether to attempt to correct the job by
changing the ALGO from Fast to Normal.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.handlers.NonConvergingErrorHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#NonConvergingErrorHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.NonConvergingErrorHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.NonConvergingErrorHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#NonConvergingErrorHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.NonConvergingErrorHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.NonConvergingErrorHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = True</em><a class="headerlink" href="#custodian.vasp.handlers.NonConvergingErrorHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="custodian.vasp.handlers.PositiveEnergyErrorHandler">
<em class="property">class </em><code class="descname">PositiveEnergyErrorHandler</code><span class="sig-paren">(</span><em>output_filename='OSZICAR'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#PositiveEnergyErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.PositiveEnergyErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>Check if a run has positive absolute energy.
If so, change ALGO from Fast to Normal or kill the job.</p>
<p>Initializes the handler with the output file to check.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>output_filename</strong> (<em>str</em>) &#8211; This is the OSZICAR file. Change
this only if it is different from the default (unlikely).</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.handlers.PositiveEnergyErrorHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#PositiveEnergyErrorHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.PositiveEnergyErrorHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.PositiveEnergyErrorHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#PositiveEnergyErrorHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.PositiveEnergyErrorHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.PositiveEnergyErrorHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = True</em><a class="headerlink" href="#custodian.vasp.handlers.PositiveEnergyErrorHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="custodian.vasp.handlers.PotimErrorHandler">
<em class="property">class </em><code class="descname">PotimErrorHandler</code><span class="sig-paren">(</span><em>input_filename='POSCAR'</em>, <em>output_filename='OSZICAR'</em>, <em>dE_threshold=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#PotimErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.PotimErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>Check if a run has excessively large positive energy changes.
This is typically caused by too large a POTIM. Runs typically
end up crashing with some other error (e.g. BRMIX) as the geometry
gets progressively worse.</p>
<p>Initializes the handler with the input and output files to check.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>input_filename</strong> (<em>str</em>) &#8211; This is the POSCAR file that the run
started from. Defaults to &#8220;POSCAR&#8221;. Change
this only if it is different from the default (unlikely).</li>
<li><strong>output_filename</strong> (<em>str</em>) &#8211; This is the OSZICAR file. Change
this only if it is different from the default (unlikely).</li>
<li><strong>dE_threshold</strong> (<em>float</em>) &#8211; The threshold energy change. Defaults to 1eV.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.handlers.PotimErrorHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#PotimErrorHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.PotimErrorHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.PotimErrorHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#PotimErrorHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.PotimErrorHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.PotimErrorHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = True</em><a class="headerlink" href="#custodian.vasp.handlers.PotimErrorHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="custodian.vasp.handlers.StoppedRunHandler">
<em class="property">class </em><code class="descname">StoppedRunHandler</code><a class="reference internal" href="_modules/custodian/vasp/handlers.html#StoppedRunHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.StoppedRunHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>This is not an error handler per se, but rather a checkpointer. What this
does is that every X seconds, a STOPCAR will be written. This forces VASP to
stop at the end of the next ionic step. The files are then copied into a
subdir, and then the job is restarted. To use this proper, max_errors in
Custodian must be set to a very high value, and you probably wouldn&#8217;t
want to use any standard VASP error handlers. The checkpoint will be
stored in subdirs chk_#. This should be used in combination with the
StoppedRunHandler.</p>
<dl class="method">
<dt id="custodian.vasp.handlers.StoppedRunHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#StoppedRunHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.StoppedRunHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.StoppedRunHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#StoppedRunHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.StoppedRunHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.StoppedRunHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = False</em><a class="headerlink" href="#custodian.vasp.handlers.StoppedRunHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.StoppedRunHandler.is_terminating">
<code class="descname">is_terminating</code><em class="property"> = False</em><a class="headerlink" href="#custodian.vasp.handlers.StoppedRunHandler.is_terminating" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="custodian.vasp.handlers.UnconvergedErrorHandler">
<em class="property">class </em><code class="descname">UnconvergedErrorHandler</code><span class="sig-paren">(</span><em>output_filename='vasprun.xml'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#UnconvergedErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.UnconvergedErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>Check if a run is converged. Switches to ALGO = Normal.</p>
<p>Initializes the handler with the output file to check.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>output_vasprun</strong> (<em>str</em>) &#8211; Filename for the vasprun.xml file. Change
this only if it is different from the default (unlikely).</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.handlers.UnconvergedErrorHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#UnconvergedErrorHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.UnconvergedErrorHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.UnconvergedErrorHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#UnconvergedErrorHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.UnconvergedErrorHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.UnconvergedErrorHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = False</em><a class="headerlink" href="#custodian.vasp.handlers.UnconvergedErrorHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="custodian.vasp.handlers.VaspErrorHandler">
<em class="property">class </em><code class="descname">VaspErrorHandler</code><span class="sig-paren">(</span><em>output_filename='vasp.out'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#VaspErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.VaspErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>Master VaspErrorHandler class that handles a number of common errors
that occur during VASP runs.</p>
<p>Initializes the handler with the output file to check.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>output_filename</strong> (<em>str</em>) &#8211; This is the file where the stdout for vasp
is being redirected. The error messages that are checked are
present in the stdout. Defaults to &#8220;vasp.out&#8221;, which is the
default redirect used by <a class="reference internal" href="#custodian.vasp.jobs.VaspJob" title="custodian.vasp.jobs.VaspJob"><code class="xref py py-class docutils literal"><span class="pre">custodian.vasp.jobs.VaspJob</span></code></a>.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.handlers.VaspErrorHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#VaspErrorHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.VaspErrorHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.VaspErrorHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#VaspErrorHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.VaspErrorHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.VaspErrorHandler.error_msgs">
<code class="descname">error_msgs</code><em class="property"> = {'pssyevx': ['ERROR in subspace rotation PSSYEVX'], 'tetirr': ['Routine TETIRR needs special values'], 'amin': ['One of the lattice vectors is very long (&gt;50 A), but AMIN'], 'triple_product': ['ERROR: the triple product of the basis vectors'], 'brions': ['BRIONS problems: POTIM should be increased'], 'incorrect_shift': ['Could not get correct shifts'], 'eddrmm': ['WARNING in EDDRMM: call to ZHEGV failed'], 'zpotrf': ['LAPACK: Routine ZPOTRF failed'], 'brmix': ['BRMIX: very serious problems'], 'real_optlay': ['REAL_OPTLAY: internal error', 'REAL_OPT: internal ERROR'], 'rspher': ['ERROR RSPHER'], 'zbrent': ['ZBRENT: fatal internal in', 'ZBRENT: fatal error in bracketing'], 'subspacematrix': ['WARNING: Sub-Space-Matrix is not hermitian in DAV'], 'grad_not_orth': ['EDWAV: internal error, the gradient is not orthogonal'], 'edddav': ['Error EDDDAV: Call to ZHEGV failed'], 'pricel': ['internal error in subroutine PRICEL'], 'dentet': ['DENTET'], 'tet': ['Tetrahedron method fails for NKPT&lt;4', 'Fatal error detecting k-mesh', 'Fatal error: unable to match k-point', 'Routine TETIRR needs special values'], 'rot_matrix': ['Found some non-integer element in rotation matrix'], 'inv_rot_mat': ['inverse of rotation matrix was not found (increase SYMPREC)'], 'too_few_bands': ['TOO FEW BANDS']}</em><a class="headerlink" href="#custodian.vasp.handlers.VaspErrorHandler.error_msgs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.VaspErrorHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = True</em><a class="headerlink" href="#custodian.vasp.handlers.VaspErrorHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="custodian.vasp.handlers.WalltimeHandler">
<em class="property">class </em><code class="descname">WalltimeHandler</code><span class="sig-paren">(</span><em>wall_time=None</em>, <em>buffer_time=300</em>, <em>electronic_step_stop=False</em>, <em>auto_continue=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#WalltimeHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.WalltimeHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.ErrorHandler" title="custodian.custodian.ErrorHandler"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.ErrorHandler</span></code></a></p>
<p>Check if a run is nearing the walltime. If so, write a STOPCAR with
LSTOP or LABORT = .True.. You can specify the walltime either in the init (
which is unfortunately necessary for SGE and SLURM systems. If you happen
to be running on a PBS system and the PBS_WALLTIME variable is in the run
environment, the wall time will be automatically determined if not set.</p>
<p>Initializes the handler with a buffer time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>wall_time</strong> (<em>int</em>) &#8211; Total walltime in seconds. If this is None and
the job is running on a PBS system, the handler will attempt to
determine the walltime from the PBS_WALLTIME environment
variable. If the wall time cannot be determined or is not
set, this handler will have no effect.</li>
<li><strong>buffer_time</strong> (<em>int</em>) &#8211; The min amount of buffer time in secs at the
end that the STOPCAR will be written. The STOPCAR is written
when the time remaining is &lt; the higher of 3 x the average
time for each ionic step and the buffer time. Defaults to
300 secs, which is the default polling time of Custodian.
This is typically sufficient for the current ionic step to
complete. But if other operations are being performed after
the run has stopped, the buffer time may need to be increased
accordingly.</li>
<li><strong>electronic_step_stop</strong> (<em>bool</em>) &#8211; Whether to check for electronic steps
instead of ionic steps (e.g. for static runs on large systems or
static HSE runs, ...). Be careful that results such as density
or wavefunctions might not be converged at the electronic level.
Should be used with LWAVE = .True. to be useful. If this is
True, the STOPCAR is written with LABORT = .TRUE. instead of
LSTOP = .TRUE.</li>
<li><strong>auto_continue</strong> (<em>bool</em>) &#8211; Use the auto-continue functionality within the
VaspJob by ensuring Vasp doesn&#8217;t delete the STOPCAR</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.handlers.WalltimeHandler.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#WalltimeHandler.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.WalltimeHandler.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="custodian.vasp.handlers.WalltimeHandler.correct">
<code class="descname">correct</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/handlers.html#WalltimeHandler.correct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.handlers.WalltimeHandler.correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.WalltimeHandler.is_monitor">
<code class="descname">is_monitor</code><em class="property"> = True</em><a class="headerlink" href="#custodian.vasp.handlers.WalltimeHandler.is_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.WalltimeHandler.is_terminating">
<code class="descname">is_terminating</code><em class="property"> = False</em><a class="headerlink" href="#custodian.vasp.handlers.WalltimeHandler.is_terminating" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="custodian.vasp.handlers.WalltimeHandler.raises_runtime_error">
<code class="descname">raises_runtime_error</code><em class="property"> = False</em><a class="headerlink" href="#custodian.vasp.handlers.WalltimeHandler.raises_runtime_error" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-custodian.vasp.interpreter">
<span id="custodian-vasp-interpreter-module"></span><h2>custodian.vasp.interpreter module<a class="headerlink" href="#module-custodian.vasp.interpreter" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="custodian.vasp.interpreter.VaspModder">
<em class="property">class </em><code class="descname">VaspModder</code><span class="sig-paren">(</span><em>actions=None</em>, <em>strict=True</em>, <em>vi=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/interpreter.html#VaspModder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.interpreter.VaspModder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.ansible.html#custodian.ansible.interpreter.Modder" title="custodian.ansible.interpreter.Modder"><code class="xref py py-class docutils literal"><span class="pre">custodian.ansible.interpreter.Modder</span></code></a></p>
<p>Initializes a Modder for VaspInput sets</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>actions</strong> (<em>[Action]</em>) &#8211; A sequence of supported actions. See
<a class="reference internal" href="custodian.ansible.html#module-custodian.ansible.actions" title="custodian.ansible.actions"><code class="xref py py-mod docutils literal"><span class="pre">custodian.ansible.actions</span></code></a>. Default is None,
which means DictActions and FileActions are supported.</li>
<li><strong>strict</strong> (<em>bool</em>) &#8211; Indicating whether to use strict mode. In non-strict
mode, unsupported actions are simply ignored without any
errors raised. In strict mode, if an unsupported action is
supplied, a ValueError is raised. Defaults to True.</li>
<li><strong>vi</strong> (<em>VaspInput</em>) &#8211; A VaspInput object from the current directory.
Initialized automatically if not passed (but passing it will
avoid having to reparse the directory).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.interpreter.VaspModder.apply_actions">
<code class="descname">apply_actions</code><span class="sig-paren">(</span><em>actions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/interpreter.html#VaspModder.apply_actions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.interpreter.VaspModder.apply_actions" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a list of actions to the Vasp Input Set and rewrites modified
files.
:param actions [dict]: A list of actions of the form {&#8216;file&#8217;: filename,</p>
<blockquote>
<div>&#8216;action&#8217;: moddermodification} or {&#8216;dict&#8217;: vaspinput_key,
&#8216;action&#8217;: moddermodification}</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-custodian.vasp.jobs">
<span id="custodian-vasp-jobs-module"></span><h2>custodian.vasp.jobs module<a class="headerlink" href="#module-custodian.vasp.jobs" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="custodian.vasp.jobs.VaspJob">
<em class="property">class </em><code class="descname">VaspJob</code><span class="sig-paren">(</span><em>vasp_cmd</em>, <em>output_file='vasp.out'</em>, <em>stderr_file='std_err.txt'</em>, <em>suffix=''</em>, <em>final=True</em>, <em>backup=True</em>, <em>auto_npar=True</em>, <em>auto_gamma=True</em>, <em>settings_override=None</em>, <em>gamma_vasp_cmd=None</em>, <em>copy_magmom=False</em>, <em>auto_continue=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/jobs.html#VaspJob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.jobs.VaspJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.Job" title="custodian.custodian.Job"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.Job</span></code></a></p>
<p>A basic vasp job. Just runs whatever is in the directory. But conceivably
can be a complex processing of inputs etc. with initialization.</p>
<p>This constructor is necessarily complex due to the need for
flexibility. For standard kinds of runs, it&#8217;s often better to use one
of the static constructors. The defaults are usually fine too.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>vasp_cmd</strong> (<em>str</em>) &#8211; Command to run vasp as a list of args. For example,
if you are using mpirun, it can be something like
[&#8220;mpirun&#8221;, &#8220;pvasp.5.2.11&#8221;]</li>
<li><strong>output_file</strong> (<em>str</em>) &#8211; Name of file to direct standard out to.
Defaults to &#8220;vasp.out&#8221;.</li>
<li><strong>output_file</strong> &#8211; Name of file to direct standard error to.
Defaults to &#8220;std_err.txt&#8221;.</li>
<li><strong>suffix</strong> (<em>str</em>) &#8211; A suffix to be appended to the final output. E.g.,
to rename all VASP output from say vasp.out to
vasp.out.relax1, provide &#8221;.relax1&#8221; as the suffix.</li>
<li><strong>final</strong> (<em>bool</em>) &#8211; Indicating whether this is the final vasp job in a
series. Defaults to True.</li>
<li><strong>backup</strong> (<em>bool</em>) &#8211; Whether to backup the initial input files. If True,
the INCAR, KPOINTS, POSCAR and POTCAR will be copied with a
&#8221;.orig&#8221; appended. Defaults to True.</li>
<li><strong>default_vasp_input_set</strong> (<em>VaspInputSet</em>) &#8211; Species the default input
set (see pymatgen&#8217;s documentation in pymatgen.io.vasp.sets to
use for directories that do not contain full set of VASP
input files. For example, if a directory contains only a
POSCAR or a cif, the vasp input set will be used to generate
the necessary input files for the run. If the directory already
contain a full set of VASP input files,
this input is ignored. Defaults to the MITVaspInputSet.</li>
<li><strong>auto_npar</strong> (<em>bool</em>) &#8211; Whether to automatically tune NPAR to be sqrt(
number of cores) as recommended by VASP for DFT calculations.
Generally, this results in significant speedups. Defaults to
True. Set to False for HF, GW and RPA calculations.</li>
<li><strong>auto_gamma</strong> (<em>bool</em>) &#8211; Whether to automatically check if run is a
Gamma 1x1x1 run, and whether a Gamma optimized version of
VASP exists with &#8221;.gamma&#8221; appended to the name of the VASP
executable (typical setup in many systems). If so, run the
gamma optimized version of VASP instead of regular VASP. You
can also specify the gamma vasp command using the
gamma_vasp_cmd argument if the command is named differently.</li>
<li><strong>settings_override</strong> (<em>[dict]</em>) &#8211; <p>An ansible style list of dict to
override changes. For example, to set ISTART=1 for subsequent
runs and to copy the CONTCAR to the POSCAR, you will provide:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s2">&quot;dict&quot;</span><span class="p">:</span> <span class="s2">&quot;INCAR&quot;</span><span class="p">,</span> <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;_set&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;ISTART&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}}},</span>
 <span class="p">{</span><span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;CONTCAR&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;_file_copy&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;dest&quot;</span><span class="p">:</span> <span class="s2">&quot;POSCAR&quot;</span><span class="p">}}}]</span>
</pre></div>
</div>
</li>
<li><strong>gamma_vasp_cmd</strong> (<em>str</em>) &#8211; Command for gamma vasp version when
auto_gamma is True. Should follow the list style of
subprocess. Defaults to None, which means &#8221;.gamma&#8221; is added
to the last argument of the standard vasp_cmd.</li>
<li><strong>copy_magmom</strong> (<em>bool</em>) &#8211; Whether to copy the final magmom from the
OUTCAR to the next INCAR. Useful for multi-relaxation runs
where the CHGCAR and WAVECAR are sometimes deleted (due to
changes in fft grid, etc.). Only applies to non-final runs.</li>
<li><strong>auto_continue</strong> (<em>bool</em>) &#8211; Whether to automatically continue a run
if a STOPCAR is present. This is very usefull if using the
wall-time handler which will write a read-only STOPCAR to
prevent VASP from deleting it once it finishes</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="custodian.vasp.jobs.VaspJob.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/jobs.html#VaspJob.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.jobs.VaspJob.as_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="custodian.vasp.jobs.VaspJob.double_relaxation_run">
<em class="property">classmethod </em><code class="descname">double_relaxation_run</code><span class="sig-paren">(</span><em>vasp_cmd</em>, <em>auto_npar=True</em>, <em>ediffg=-0.05</em>, <em>half_kpts_first_relax=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/jobs.html#VaspJob.double_relaxation_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.jobs.VaspJob.double_relaxation_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of two jobs corresponding to an AFLOW style double
relaxation run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>vasp_cmd</strong> (<em>str</em>) &#8211; Command to run vasp as a list of args. For example,
if you are using mpirun, it can be something like
[&#8220;mpirun&#8221;, &#8220;pvasp.5.2.11&#8221;]</li>
<li><strong>auto_npar</strong> (<em>bool</em>) &#8211; Whether to automatically tune NPAR to be sqrt(
number of cores) as recommended by VASP for DFT calculations.
Generally, this results in significant speedups. Defaults to
True. Set to False for HF, GW and RPA calculations.</li>
<li><strong>ediffg</strong> (<em>float</em>) &#8211; Force convergence criteria for subsequent runs (
ignored for the initial run.)</li>
<li><strong>half_kpt_first_relax</strong> (<em>bool</em>) &#8211; Whether to halve the kpoint grid
for the first relaxation. Speeds up difficult convergence
considerably. Defaults to False.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of two jobs corresponding to an AFLOW style run.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="custodian.vasp.jobs.VaspJob.from_dict">
<em class="property">classmethod </em><code class="descname">from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/jobs.html#VaspJob.from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.jobs.VaspJob.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="custodian.vasp.jobs.VaspJob.full_opt_run">
<em class="property">classmethod </em><code class="descname">full_opt_run</code><span class="sig-paren">(</span><em>vasp_cmd</em>, <em>auto_npar=True</em>, <em>vol_change_tol=0.02</em>, <em>max_steps=10</em>, <em>ediffg=-0.05</em>, <em>half_kpts_first_relax=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/jobs.html#VaspJob.full_opt_run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.jobs.VaspJob.full_opt_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator of jobs for a full optimization run. Basically,
this runs an infinite series of geometry optimization jobs until the
% vol change in a particular optimization is less than vol_change_tol.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>vasp_cmd</strong> (<em>str</em>) &#8211; Command to run vasp as a list of args. For example,
if you are using mpirun, it can be something like
[&#8220;mpirun&#8221;, &#8220;pvasp.5.2.11&#8221;]</li>
<li><strong>auto_npar</strong> (<em>bool</em>) &#8211; Whether to automatically tune NPAR to be sqrt(
number of cores) as recommended by VASP for DFT calculations.
Generally, this results in significant speedups. Defaults to
True. Set to False for HF, GW and RPA calculations.</li>
<li><strong>vol_change_tol</strong> (<em>float</em>) &#8211; The tolerance at which to stop a run.
Defaults to 0.05, i.e., 5%.</li>
<li><strong>max_steps</strong> (<em>int</em>) &#8211; The maximum number of runs. Defaults to 10 (
highly unlikely that this limit is ever reached).</li>
<li><strong>ediffg</strong> (<em>float</em>) &#8211; Force convergence criteria for subsequent runs (
ignored for the initial run.)</li>
<li><strong>half_kpts_first_relax</strong> (<em>bool</em>) &#8211; Whether to halve the kpoint grid
for the first relaxation. Speeds up difficult convergence
considerably. Defaults to False.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Generator of jobs.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="custodian.vasp.jobs.VaspJob.postprocess">
<code class="descname">postprocess</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/jobs.html#VaspJob.postprocess"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.jobs.VaspJob.postprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Postprocessing includes renaming and gzipping where necessary.
Also copies the magmom to the incar if necessary</p>
</dd></dl>

<dl class="method">
<dt id="custodian.vasp.jobs.VaspJob.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/jobs.html#VaspJob.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.jobs.VaspJob.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the actual VASP run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(subprocess.Popen) Used for monitoring.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="custodian.vasp.jobs.VaspJob.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/jobs.html#VaspJob.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.jobs.VaspJob.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs initial setup for VaspJob, including overriding any settings
and backing up.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-custodian.vasp.validators">
<span id="custodian-vasp-validators-module"></span><h2>custodian.vasp.validators module<a class="headerlink" href="#module-custodian.vasp.validators" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="custodian.vasp.validators.VasprunXMLValidator">
<em class="property">class </em><code class="descname">VasprunXMLValidator</code><a class="reference internal" href="_modules/custodian/vasp/validators.html#VasprunXMLValidator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.validators.VasprunXMLValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="custodian.html#custodian.custodian.Validator" title="custodian.custodian.Validator"><code class="xref py py-class docutils literal"><span class="pre">custodian.custodian.Validator</span></code></a></p>
<p>Checks that a valid vasprun.xml was generated</p>
<dl class="method">
<dt id="custodian.vasp.validators.VasprunXMLValidator.check">
<code class="descname">check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/custodian/vasp/validators.html#VasprunXMLValidator.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#custodian.vasp.validators.VasprunXMLValidator.check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-custodian.vasp">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-custodian.vasp" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">custodian.vasp package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-custodian.vasp.handlers">custodian.vasp.handlers module</a></li>
<li><a class="reference internal" href="#module-custodian.vasp.interpreter">custodian.vasp.interpreter module</a></li>
<li><a class="reference internal" href="#module-custodian.vasp.jobs">custodian.vasp.jobs module</a></li>
<li><a class="reference internal" href="#module-custodian.vasp.validators">custodian.vasp.validators module</a></li>
<li><a class="reference internal" href="#module-custodian.vasp">Module contents</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/custodian.vasp.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy; Copyright 2013, Shyue Ping Ong, William Davidson Richards, Stephen Dacek, Xiaohui Qu.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

  </body>
</html>